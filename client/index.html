<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Blog</title>
    <base href="/">
    <script src="/utils.js" type="text/javascript"></script>
  </head>

  <body>
    <div>
      <h1>Posts</h1>
      <a href="/create.html">Create post</a>
      <ul id="list"></ul>
    </div>

    <script>
    api("GET", "/posts").then(data => {
      // Map the posts.
      const posts = (data || []).map(post => `<li>${post.title} - ${post.description}</li>`).join(" ");
      const list_posts = document.getElementById("list");
      // Show posts.
      list_posts.innerHTML = posts;
    }).catch(error => {
      // The user is informed if an error occurs.
      console.log(error);
    });
    </script>
  </body>
</html>
