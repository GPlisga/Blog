<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Blog</title>
    <base href="/">
  </head>

  <body onload="getAll()">
    <div>
      <h1>Posts</h1>
      <div id="list"></div>
    </div>

    <script>
    function getAll(){
      const xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4) {
          if (this.status == 200) {
            const response = xhttp.responseText;
            const data = JSON.parse(response);

            const posts = (data || []).map(post => `<li>${post.title} - ${post.description}</li>`).join(" ");
            const list_posts = document.getElementById("list");
            list_posts.innerHTML = posts;
          } else {
            alert("Error");
          }
        }
      };
      xhttp.open("GET", "/api/posts", true);
      xhttp.setRequestHeader("content-type", "application/json");
      xhttp.send(JSON.stringify());
    }
    </script>
  </body>
</html>
